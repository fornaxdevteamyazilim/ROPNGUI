<div ng-controller="complainteditCtrl as vm">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                <div class="col-lg-12 col-md-12 col-sm-8 col-xs-8 margin-top-10">
                    <span class="mainTitle text-dark text-uppercase" style="font-size:25px;" translate="tittle.COMPLAINTEDIT" translate-values="{ appName: app.name }">{{ mainTitle }}</span><br /><br />
                </div>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 margin-top-10">
                <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12 pull-right">
                    <a class="btn btn-wide btn-red btn-scroll btn-scroll-top ti-back-left margin-right-10 pull-right" ng-click="Back()">
                        <span translate="main.BACK"></span>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 panel panel-white">
            <div class="panel-body">
                <form role="form" name="userForm">
                    <div ng-if="Order" class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label for="OrderNumber" translate="main.ORDERNUMBER"></label>
                        <input type="text" class="form-control text-capitalize ng" ng-model="Order.id" />
                    </div>
                    <div ng-if="!Order" class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label class="text-bold" for="Store" translate="main.*STORE"></label>
                        <select ng-options="q.id as q.name for q in stores | orderBy:'+name'" class="form-control text-capitalize ng" ng-model="item.StoreID"></select>
                    </div>

                    <div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label class="text-bold" for="Relation" translate="main.*COMPLAINTRELATION"></label><br />
                        <select ng-options="q.id as q.name for q in complaintrelations | orderBy:'+name'" class="form-control text-capitalize ng" ng-model="item.ComplaintRelationID"></select>
                    </div>

                    <div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label class="text-bold" for="ComplaintType" translate="main.*COMPLAINTTYPE"></label><br />
                        <select ng-options="q.Value as q.Name for q in complainttypes | orderBy:'+Name'" class="form-control text-capitalize ng" ng-model="item.ComplaintTypeID"></select>
                    </div>
                    <div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label class="text-bold" for="Conclisuon" translate="main.*COMPLAINTCONCLUSION"></label>
                        <select ng-options="q.Value as q.Name for q in complaintconclusions | orderBy:'+Name'" class="form-control text-capitalize ng" ng-model="item.ComplaintConclusionID"></select>
                    </div>
                    <div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label class="text-bold" for="Source" translate="main.*COMPLAINTSOURCE"></label>
                        <select ng-options="q.id as q.name for q in complaintsources | orderBy:'+name'" class="form-control text-capitalize ng" ng-model="item.ComplaintSourceID"></select>
                    </div>
                    <div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label class="text-bold" for="ComplaintSourceID" translate="main.*COMPLAINTSUBJECT"></label>
                        <select id="ComplaintSubjectID" ng-options="t.id as t.name for t in complaintsubjects | orderBy:'+name'" class="form-control text-capitalize ng" ng-model="item.ComplaintSubjectID"></select>
                    </div>
                    <!--<div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label class="text-bold" for="ComplaintReactionID" translate="main.*COMPLAINTREACTION"></label>
                        <select id="ComplaintReactionID" ng-options="t.id as t.name for t in complaintreactions | orderBy:'+name'" class="form-control text-capitalize ng" ng-model="item.ComplaintReactionID"></select>
                    </div>-->
                    <div class="form-group col-sm-12 col-lg-3 col-md-4 col-xs-12">
                        <label class="text-bold" translate="main.*COMPLAINTNOTE" for="ComplaintNote"></label>
                        <textarea maxlength="2000" type="text" style='min-height:70px; max-width:330px; max-height:100px; min-width:330px;' class="form-control" ng-model="item.ComplaintNote" required></textarea>
                    </div>
                    <div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label for="ComplaintDate" translate="main.COMPLAINTDATE"></label>
                        <input id="Date"
                               type="text"
                               class="form-control"
                               ng-model="item.ComplaintDate"
                               readonly
                               ng-click="ComplaintDatePopup(item)">
                    </div>
                    <div class="form-group col-sm-12 col-lg-3 col-md-4 col-xs-12">
                        <label translate="main.INCIDENTNOTES" for="IncidentNotes"></label>
                        <textarea type="text" style='min-height:70px; max-width:330px; max-height:100px; min-width:330px;' class="form-control" ng-model="item.IncidentNotes"></textarea>
                    </div>
                    <div class="form-group col-sm-4 col-lg-2 col-md-3 col-xs-12">
                        <label for="IncidentDate" translate="main.INCIDENTDATE"></label>
                        <input id="Date"
                               type="text"
                               class="form-control"
                               ng-model="item.IncidentDate"
                               readonly
                               ng-click="IncidentDatePopup(item)">
                    </div>
                    <div class="form-group col-sm-12 col-lg-2 col-md-3 col-xs-12">
                        <label translate="main.CUSTOMERREACTIONNOTES" for="CustomerReacitonNotes"></label>
                        <textarea type="text" style='min-height:70px; max-width:230px; max-height:100px; min-width:230px;' class="form-control" ng-model="item.CustomerReacitonNotes"></textarea>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <!--<div class="form-group col-sm-12 col-lg-3 col-md-4 col-xs-12">
                            <label translate="main.INCIDENTNOTES" for="IncidentNotes"></label>
                            <textarea type="text" style='min-height:70px; max-width:300px; max-height:100px; min-width:300px;' class="form-control text-capitalize" ng-model="item.IncidentNotes"></textarea>
                        </div>-->
                        <!--<div class="form-group col-sm-12 col-lg-3 col-md-4 col-xs-12">
                            <label class="text-bold"  translate="main.*COMPLAINTNOTE" for="ComplaintNote"></label>
                            <textarea maxlength="2000" type="text" style='min-height:70px; max-width:300px; max-height:100px; min-width:300px;' class="form-control text-capitalize" ng-model="item.ComplaintNote" required></textarea>
                        </div>-->
                        <!--<div class="form-group col-sm-12 col-lg-3 col-md-4 col-xs-12">
                            <label translate="main.CUSTOMERREACTIONNOTES" for="CustomerReacitonNotes"></label>
                            <textarea type="text" style='min-height:70px; max-width:300px; max-height:100px; min-width:300px;' class="form-control text-capitalize" ng-model="item.CustomerReacitonNotes"></textarea>
                        </div>-->
                        <div class="form-group col-sm-12 col-lg-3 col-md-4 col-xs-12">
                            <label translate="main.CONCLUSIONNOTES" for="ConclusionNotes"></label>
                            <textarea type="text" style='min-height:70px; max-width:330px; max-height:100px; min-width:330px;' class="form-control text-capitalize" ng-model="item.ConclusionNotes"></textarea>
                        </div>
                        <p class="col-sm-12 col-lg-4 col-md-5 col-xs-12 margin-top-30">
                            Koyu renk yazılmış ve * işareti olan alanlar zorunludur.
                        </p>
                    </div>
                    <hr />
                    <div class="form-group col-sm-12 col-lg-12 col-md-12 col-xs-12">
                        <!--ng-disabled="isClean()"-->
                        <button class="btn btn-primary btn-wide btn-scroll btn-scroll-left fa  fa-save " ng-click="saveData(item)" ng-disabled="userForm.$invalid || ButtonActive == false">
                            <span class="fa fa-spin fa-spinner" ng-if="ButtonActive == false"></span> <span translate="main.SAVE"></span>
                        </button>
                        <button class="btn btn-danger btn-wide btn-scroll btn-scroll-left fa ti-close pull-right" ng-if="user.restrictions.deletecomplaint=='Enable'" ng-click="removedata(item.id)">
                            <span translate="main.DELETE"></span>
                        </button>
                    </div>

                </form>
            </div>
        </div>
        <!--ng-show="ComplaintID"-->
        <div class="col-lg-12">
            <tabset justified="true" class="tabbable">
                <tab heading="{{'main.COMPLAINTACTION' | translate}}">
                    <div ng-controller="complaintactionsCtrl as car">
                        <a class="btn btn-primary btn-wide btn-scroll btn-scroll-top ti-plus" ng-click="addItem()">
                            <span translate="main.ADDACTION"></span>
                        </a>
                        <br />
                        <table ng-table="car.tableParams" class="table table-striped table-hover">
                            <tr ng-repeat="item in $data"
                                ng-keyup="FormKeyPress($event,rowform,$data[$index],$index)">
                                <td class="text-capitalize ng" data-title="trComplainActionResult" data-sortable="'PaymentTypeID'" ng-click="rowform.$show()" style="width:30%">
                                    <span editable-select="item.ComplaintActionResultID" e-name="ComplaintActionResultID" e-ng-model="item.ComplaintActionResultID" e-form="rowform"
                                          e-ng-options="q.id as q.name for q in complaintactionresults | orderBy:'+name'" e-style="width:30vw;">
                                        {{ ShowObject('complaintactionresults','id',item.ComplaintActionResultID,'name') }}
                                    </span>
                                </td>
                                <td class="ng" data-title="trNotes" data-sortable="'Notes'" style="width:30%">
                                    <span editable-text="item.Notes" e-name="Notes" e-ng-model="item.Notes" e-form="rowform" e-style="width:30vw;">
                                        {{ item.Notes }}
                                    </span>
                                </td>
                                <td data-title="trActionDate" data-sortable="'ActionDate'" style="width:30%">
                                    <input id="Date"
                                           type="text"
                                           class="form-control"
                                           ng-model="item.ActionDate"
                                           readonly
                                           ng-click="ActionDatePopup(item)" ng-show="rowform.$visible">
                                    <span ng-show="!rowform.$visible" e-name="ActionDate" e-form="rowform" e-ng-model="item.ActionDate" e-style="width:30vw;">
                                        {{ item.ActionDate| date:'dd.MM.yyyy' }}
                                    </span>
                                </td>
                                <td style="white-space: nowrap;grid-column-sizing:auto;" data-title="trCommands" width="4%">
                                    <form editable-form name="rowform" onaftersave="SaveDataItem(item)" ng-show="rowform.$visible" class="form-buttons form-inline"
                                          shown="inserted == item|| !item.id">
                                        <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-transparent btn-sm tooltips ti-check"></button>
                                        <button type="button" ng-disabled="rowform.$waiting" ng-click="cancelForm(rowform)" class="btn btn-transparent btn-sm tooltips ti-close"></button>
                                    </form>
                                    <div class="buttons pull-right" ng-show="!rowform.$visible">
                                        <a class="btn btn-transparent btn-sm tooltips ti-pencil hidden-sm hidden-xs" tooltip="{{'main.EDIT' |translate}}" tooltip-placement="top" ng-click="rowform.$show()"></a>
                                        <a class="btn btn-transparent btn-sm tooltips ti-close hidden-sm hidden-xs" tooltip="{{'main.DELETE' |translate}}" tooltip-placement="top" ng-click="removeItem($index)"></a>
                                        <a class="btn btn-transparent btn-sm tooltips ti-alert hidden-sm hidden-xs" tooltip="{{'main.TAG' |translate}}" tooltip-placement="top" ng-click="open(item.id)"></a>
                                    </div>
                                    <div class="visible-xs visible-sm hidden-md hidden-lg">
                                        <div class="btn-group" dropdown is-open="status.isopen">
                                            <button type="button" class="btn btn-primary btn-o btn-sm dropdown-toggle" dropdown-toggle>
                                                <i class="fa fa-cog"></i>&nbsp;<span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu pull-right dropdown-light" role="menu">
                                                <li>
                                                    <a class="btn btn-transparent btn-sm tooltips" ng-click="rowform.$show()" translate="main.EDIT"> </a>
                                                </li>
                                                <li>
                                                    <a class="btn btn-transparent btn-sm tooltips" ng-click="open(item.id)" translate="main.TAG"> </a>
                                                </li>
                                                <li>
                                                    <a class="btn btn-transparent btn-sm tooltips" ng-click="removeItem($index)" translate="main.DELETE"> </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                        <div>
                            <a class="btn btn-primary btn-wide btn-scroll btn-scroll-top fa fa-minus-circle pull-right" ng-show="ComplaintActions == true" ng-click="closecomplaint(item)">
                                <span translate="main.CLOSECOMPLAINT"></span>
                            </a>
                            <hr />
                        </div>
                    </div>
                </tab>
            </tabset>
        </div>
        <!--</div>-->
    </div>
</div>